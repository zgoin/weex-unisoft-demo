<!-- Created by 赵官林 on 20/6/17. -->
<!--输入框input扩展（细分number为int与float）-->
<template>
    <input class="input" :type="inputType" v-bind="$attrs" :value="value" v-on="inputListeners"/>
</template>

<script>

export default {
  name: 'utInput',
  inheritAttrs: false,
  props:{
      type: {
        type: String,
        default: 'text'
      },//输入类型扩展：int、float
      value: {
        type: [String, Number],
        default: ''
      }
  },
  computed: {
    inputType: function () {
      let type = this.type.toLowerCase();
      if (type === 'int' || type === 'float') {
        return 'number';
      }
      return type;
    },
    inputListeners: function () {
      var vm = this;
      return Object.assign({}, this.$listeners, {
        input: function (event) {
          vm.$emit('input', event.value);
        },
        change: function (event) {
          let type = vm.type.toLowerCase();
          let value = event.value;
          if (type === 'int' || type === 'float') {
            let values = event.value.match(/\d+\.*\d*/) || [];
            if (values.length > 0) {
              if (type === 'int') {
                value = parseInt(values[0]);
              } else {
                value = parseFloat(values[0]);
              }
            } else {
              value = '';
            }
            vm.$emit('input', value);
          }
          vm.$emit('change', value);
        }
      });
    }
  }
}
</script>

<style scoped>
 .input { font-size: 28px; color: #333; height: 64px; line-height: 64px}
</style>